<%= turbo_frame_tag dom_id(product) do %>
  <tr class="bg-white border-b border-slate-100 hover:bg-slate-50 transition duration-150">
    <td class="px-6 py-4">
      <div class="flex items-center gap-3">
        <% if product.image.attached? %>
          <%= image_tag product.image.variant(resize_to_limit: [40, 40]), class: "w-10 h-10 rounded-lg object-cover border border-slate-200" %>
        <% else %>
          <div class="w-10 h-10 rounded-lg bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
          </div>
        <% end %>
        <div class="flex flex-col">
          <span class="font-medium text-slate-900"><%= product.name %></span>
          <span class="text-xs text-slate-500 line-clamp-1"><%= product.description %></span>
        </div>
      </div>
    </td>
    <td class="px-6 py-4 text-slate-700 font-medium">
      <%= number_to_currency(product.price) %>
    </td>
    <td class="px-6 py-4">
      <div class="flex items-center gap-4">
        <div class="flex items-center border border-slate-200 rounded-lg overflow-hidden bg-white shadow-sm">
          <%= button_to adjust_stock_product_path(product, adjustment: "decrement"), 
              method: :patch, 
              class: "px-2 py-1 bg-slate-50 hover:bg-slate-100 text-slate-600 transition duration-150 border-r border-slate-200",
              title: "Decrease Stock" do %>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/></svg>
          <% end %>

          <span class="px-3 min-w-[3rem] text-center font-bold text-slate-800 bg-white">
            <%= product.quantity %>
          </span>

          <%= button_to adjust_stock_product_path(product, adjustment: "increment"), 
              method: :patch, 
              class: "px-2 py-1 bg-slate-50 hover:bg-slate-100 text-indigo-primary transition duration-150 border-l border-slate-200",
              title: "Increase Stock" do %>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
          <% end %>
        </div>

        <div class="flex flex-col gap-1">
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-[10px] font-medium <%= product.low_stock? ? 'bg-amber-100 text-amber-warning' : 'bg-emerald-100 text-emerald-success' %>">
            <%= product.low_stock? ? 'Low Stock' : 'Optimal' %>
          </span>
          <% if product.out_of_stock? %>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-rose-100 text-rose-danger uppercase tracking-wider">
              Out of Stock
            </span>
          <% end %>
        </div>
      </div>
    </td>
    <td class="px-6 py-4 text-right space-x-3">
      <%= link_to "Edit", edit_product_path(product), class: "text-indigo-primary hover:text-indigo-700 font-medium", data: { turbo_frame: dom_id(product) } %>
      <%= button_to "Delete", product_path(product), method: :delete, class: "text-rose-danger hover:text-rose-700 font-medium inline-block", data: { turbo_confirm: "Are you sure?" } %>
    </td>
  </tr>
<% end %>
